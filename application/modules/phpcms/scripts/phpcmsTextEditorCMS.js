		//VARIABLES GLOBALES.ACTIVAS MIENTRAS DURE LA PAGINA		//var textEditorObject, textEditorText;		//LOADED IN BODY ONLOAD())		function initDoc() {		  textEditorObject = document.getElementById("textEditorJarim");	 		  textEditorText = textEditorObject.innerHTML;		  //alert(textEditorText);		  if (document.compForm.switchMode.checked) { textEditorShowPlainHtml(true); }		  		}		function formatDoc(textEditorCommand, textEditorCommandValue) {			  textEditorObject = document.getElementById("textEditorJarim");				  textEditorObject.focus(); 		  if (textEditorCommand == "insertHTML") 		  {			//textEditorCommandValue = '<a href="http:www.google.com">Google</a>';		  }		  if (validateMode()) 		  {				document.execCommand(textEditorCommand, false, textEditorCommandValue); 				textEditorObject.focus(); 		  }		}		function validateMode() {		 textEditorObject = document.getElementById("textEditorJarim");			  if (!document.compForm.switchMode.checked) { return true ; }		  alert("Uncheck \"Show HTML\".");		  textEditorObject.focus();		  return false;		}/*		function nl2br (str, is_xhtml) {       var breakTag = (is_xhtml || typeof is_xhtml === 'undefined') ? '<br />' : '<br>';        return (str + '').replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g, '$1'+ breakTag +'$2');}		*/				function textEditorShowPlainHtml(textEditorPlainHtmlCheckBox) {		  var textEditorHTMLContent;		  textEditorObject = document.getElementById("textEditorJarim");			  if (textEditorPlainHtmlCheckBox) 		  {			//var myTextNowNlr2 = textEditorObject.innerHTML;						var myTextNowNlr2 = $("#textEditorJarim").html();			//REPLACE DOUBLE SPACE			//myTextNowNlr2 = myTextNowNlr2.replace(/\s\s/g, "\r\n");			//myTextNowNlr2 = myTextNowNlr2.replace(/\<div/g, "\r\n\<div");			myTextNowNlr2 = myTextNowNlr2.replace(/\</g, "\r\n\<");															//myTextNowNlr2 = myTextNowNlr2.replace(/jarimNewLine/, "\r\n");						//var res = str.replace(/blue/g, "red");			textEditorHTMLContent = document.createTextNode(myTextNowNlr2);//COPIA EL TEXTO ORIGINAL DE textEditorObject a textEditorHTMLContent			textEditorObject.innerHTML = ""; 			textEditorObject.contentEditable = false;			var textEditorPreElementForHTML = document.createElement("pre"); //crea elemento pre (Preformatted-preserve)			textEditorPreElementForHTML.id = "jarimTextId";			textEditorPreElementForHTML.contentEditable = true;			textEditorPreElementForHTML.appendChild(textEditorHTMLContent); //INSERT ORIGINAL HTML IN elemento pre (Preformatted-preserve)			textEditorObject.appendChild(textEditorPreElementForHTML);//INSERT elemento pre IN ORIGINAL DIV		  } 		  else 		  {			if (document.all) //MAY BE FOR SOME BROWSERS...OTHERSWISE I CANT SEE MEANING WITH THIS IF			//BECAUSE document.all WILL BE TRUE ALLWAYS IF ANY ELEMENT EXIST IN THE PAGE AS LONG I KNOW...			{			  textEditorObject.innerHTML = textEditorObject.innerText;			  //alert("lort!!!");			} 			else 			{			//alert("lort!!!");			  //textEditorHTMLContent = document.createRange();			  //textEditorHTMLContent.selectNodeContents(textEditorObject.firstChild);			  var textEditorHTMLContent = $("#jarimTextId").text();			  textEditorObject.innerHTML = textEditorHTMLContent;		  			  //textEditorObject.innerHTML = textEditorHTMLContent.toString();			}			textEditorObject.contentEditable = true;		  }		  textEditorObject.focus();		}		function printDoc() {		textEditorObject = document.getElementById("textEditorJarim");			  if (!validateMode()) { return; }		  var oPrntWin = window.open("","_blank","width=450,height=470,left=400,top=100,menubar=yes,toolbar=no,location=no,scrollbars=yes");		  oPrntWin.document.open();		  oPrntWin.document.write("<!doctype html><html><head><title>Print<\/title><\/head><body onload=\"print();\">" + textEditorObject.innerHTML + "<\/body><\/html>");		  oPrntWin.document.close();		}